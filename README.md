# Учебный проект на Django + DRF.
## Цель проекта построить REST API.
#### Для запуска проекта с помощью Docker:
Из корневой директории склонированного проекта выполнить:
```sh 
cd infra
```
По умолчанию проект бэкенд будет работать в режиме ```DEBUG=False``` на БД ```SQLite```.
Предполагается использование БД Postgres, для которой создаётся отдельный контейнер. Для работы с Postgres: 
В директории ```infra``` создать ```.env``` файл для Docker со следующими переменными:
```.env
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres # имя базы данных
POSTGRES_USER=postgres # логин для подключения к базе данных
POSTGRES_PASSWORD=postgres # пароль для подключения к БД. Можно указать свой
DB_HOST=db # название сервиса (контейнера)
DB_PORT=5432 # TCP порт для подключения к БД
```
Также можно задать:
```.env
SECRET_KEY= # Ваш SECRET_KEY для Django
ENV_NAME=development # Для работы в режиме DEBUG=True
```
После этого создаём и запускаем контейнеры _nginx, postgres, backend, frontend_:
```sh
docker-compose up -d --build
```
Когда контейнеры поднимуться выполним миграции:
```sh
docker-compose exec backend python manage.py makemigrations --noinput
docker-compose exec backend python manage.py migrate --noinput
```
И создадим суперпользователя для администрирования Django:
```sh
docker-compose exec backend python manage.py createsuperuser
```
### В данном проекте создан кулинарный сайт со следующим функционалом:
- Рецепты на всех страницах сортируются по дате публикации (новые — выше).
- Работает фильтрация по тегам, в том числе на странице избранного и на странице рецептов одного автора).
- Работает пагинатор (в том числе при фильтрации по тегам).
- Исходные данные предзагружены; добавлены тестовые пользователи и рецепты.
##### Для авторизованных пользователей:
1. Доступна главная страница.
2. Доступна страница другого пользователя.
3. Доступна страница отдельного рецепта.
4. Доступна страница «Мои подписки».
   1. Можно подписаться и отписаться на странице рецепта.
   2. Можно подписаться и отписаться на странице автора.
   3. При подписке рецепты автора добавляются на страницу «Мои подписки» и удаляются оттуда при отказе от подписки.
5. Доступна страница «Избранное».
   1. На странице рецепта есть возможность добавить рецепт в список избранного и удалить его оттуда.
   2. На любой странице со списком рецептов есть возможность добавить рецепт в список избранного и удалить его оттуда.
6. Доступна страница «Список покупок».
   1. На странице рецепта есть возможность добавить рецепт в список покупок и удалить его оттуда.
   2. На любой странице со списком рецептов есть возможность добавить рецепт в список покупок и удалить его оттуда.
   3. Есть возможность выгрузить файл .txt с перечнем и количеством необходимых ингредиентов для рецептов из «Списка покупок».
   4. Ингредиенты в выгружаемом списке не повторяются, корректно подсчитывается общее количество для каждого ингредиента.
7. Доступна страница «Создать рецепт».
    1. Есть возможность опубликовать свой рецепт.
    2. Есть возможность отредактировать и сохранить изменения в своём рецепте.
    3. Есть возможность удалить свой рецепт.
8. Доступна и работает форма изменения пароля.
9. Доступна возможность выйти из системы.
##### Для неавторизованных пользователей
1. Доступна главная страница.
2. Доступна страница отдельного рецепта.
3. Доступна страница любого пользователя.
4. Доступна и работает форма авторизации.
5. Доступна и работает система восстановления пароля.
6. Доступна и работает форма регистрации.
##### Администратор и админ-зона
1. Все модели выведены в админ-зону.
2. Для модели пользователей включена фильтрация по имени и email.
3. Для модели рецептов включена фильтрация по названию, автору и тегам.
4. На админ-странице рецепта отображается общее число добавлений этого рецепта в избранное.
5. Для модели ингредиентов включена фильтрация по названию.
##### Инфраструктура
1. Проект работает с СУБД PostgreSQL.
2. Проект запущен на сервере в Яндекс.Облаке в трёх контейнерах: nginx, PostgreSQL и Django+Gunicorn. Заготовленный контейнер с фронтендом используется для сборки файлов.
3. Контейнер с проектом обновляется на Docker Hub.
4. В nginx настроена раздача статики, запросы с фронтенда переадресуются в контейнер с Gunicorn. Джанго-админка работает напрямую через Gunicorn.
5. Данные сохраняются в volumes.
##### Оформление кода
1. Код соответствует PEP8.
